<?php

/**
 * @var \Madar\StockAvailability\Block\Adminhtml\Order\View\DeliveryInfo $block
 * @var \Magento\Sales\Model\Order $order
 * @var \Magento\Sales\Model\Order\Address|null $shippingAddress
 */
$order = $block->getOrder();
$shippingAddress = $order ? $order->getShippingAddress() : null;
$latitude = $shippingAddress ? $shippingAddress->getData('latitude') : null;
$longitude = $shippingAddress ? $shippingAddress->getData('longitude') : null;
?>

<?php if ($latitude && $longitude): ?>
    <div class="admin__page-section-item order-delivery-info" style="margin-top: 15px; border-top: 1px solid #ccc; padding-top: 15px;">
        <div class="admin__page-section-item-title">
            <span class="title"><?= $block->escapeHtml(__('Delivery Location')) ?></span>
        </div>
        <div class="admin__page-section-item-content">
            <p>
                <?= $block->escapeHtml(__('Latitude')) ?>: <?= $block->escapeHtml($latitude) ?><br />
                <?= $block->escapeHtml(__('Longitude')) ?>: <?= $block->escapeHtml($longitude) ?>
            </p>
            <p>
                <a href="<?= $block->escapeUrl($block->getGoogleMapsUrl($latitude, $longitude)) ?>"
                    target="_blank"
                    style="color: #007bdb; text-decoration: none;">
                    <?= $block->escapeHtml(__('View on Google Maps')) ?>
                </a>
            </p>
        </div>
    </div>
<?php endif; ?>